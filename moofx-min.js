/*
---
provides: moofx
version: 3.0.0-20-y
description: A CSS3-enabled javascript animation library on caffeine
homepage: http://moofx.it
author: Valerio Proietti <@kamicane> (http://mad4milk.net)
license: MIT (http://mootools.net/license.txt)
...
*/
(function(a){var b=function(c){var d=c.split("/"),e=d.splice(0,1)[0],f=a[e],g,h,i;return f?!f||!(h=f.modules[c=d.join("/")||f.main])?null:(i=h.exports)!=null?i:(a[e].modules[c]=g={exports:{}},h(g,b,g.exports,window),g.exports):null};window.moofx=b("moofx")})({moofx:{main:"moofx",modules:{moofx:function(a,b){var c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B,C,D,E,F,G,H,I,J,K,L,M,N,O,P,Q=Object.prototype.hasOwnProperty,R=function(a,b){function d(){this.constructor=a}for(var c in b)Q.call(b,c)&&(a[c]=b[c]);return d.prototype=b.prototype,a.prototype=new d,a.__super__=b.prototype,a},S=b("moofx/color"),T=b("moofx/frame"),U=b("moofx/bezier"),V=T.cancel,W=T.request,X=String,Y=parseFloat,Z=function(a){return a.replace(/-\D/g,function(a){return a.charAt(1).toUpperCase()})},$=function(a){return a.replace(/[A-Z]/g,function(a){return"-"+a.charAt(0).toLowerCase()})},_=function(a){return X(a).replace(/\s+/g," ").replace(/^\s+|\s+$/g,"")},ba=function(a){var b=a.length;return b===1?a.push(a[0],a[0],a[0]):b===2?a.push(a[0],a[1]):b===3&&a.push(a[1]),a},bb=typeof getComputedStyle!="undefined"?function(a){var b=getComputedStyle(a);return function(a){return b?b.getPropertyValue($(a)):""}}:function(a){var b=a.currentStyle;return function(a){return b?b[Z(a)]:""}},bc=function(){function a(){}return a.prototype.extract=function(){return[this]},a.prototype.toString=function(){return X(this.value)},a}(),bd=function(a){function b(a){a==null&&(a=""),this.value=X(a)}return R(b,a),b}(bc),be=function(a){function b(a){var b;a==null&&(a=""),this.value=isFinite(b=Y(a))?b:a}return R(b,a),b}(bc),bf=function(){function a(){}return a.prototype.extract=function(){return this.parsed},a.prototype.toString=function(a,b){var c;return _(function(){var d,e,f=this.parsed,g=[];for(d=0,e=f.length;d<e;d++)c=f[d],g.push(c.toString(a,b));return g}.call(this).join(" "))},a}(),bg=function(a){function b(a){var b;a==null&&(a=""),a==="auto"?this.value="auto":(b=_(X(a)).match(/^([-\d.]+)(%|cm|mm|in|px|pt|pc|em|ex|ch|rem|vw|vh|vm)?$/))?(this.value=Y(b[1]),this.unit=this.value===0||!b[2]?"px":b[2]):this.value=""}return R(b,a),b.prototype.toString=function(a,b){return this.value==="auto"?this.value:a&&this.value===""?"0px":this.value===""?"":b&&this.unit!=="px"?""+bx(b,this.unit)*this.value+"px":this.value+this.unit},b}(bc),bh=function(a){function b(a){a==="transparent"&&(a="#00000000"),this.value=a?S(a,!0):""}return R(b,a),b.prototype.toString=function(a){return a&&!this.value?"rgba(0,0,0,1)":this.value?!!a||this.value!=="transparent"&&this.value[3]!==0?a||this.value[3]!==1?"rgba("+this.value+")":"rgb("+this.value[0]+","+this.value[1]+","+this.value[2]+")":"transparent":""},b}(bc),bi=function(a){function b(a){var b,c,d;a==null&&(a=""),d=ba(_(a).split(" ")),this.parsed=function(){var a,e=[];for(b=0,a=d.length;b<a;b++)c=d[b],e.push(new bg(c));return e}()}return R(b,a),b}(bf),bj=function(a){function b(a){var b;a==null&&(a=""),b=(a=_(a)).match(/none|hidden|dotted|dashed|solid|double|groove|ridge|inset|outset|inherit/),this.value=b?a:""}return R(b,a),b.prototype.toString=function(a){return a&&!this.value?"none":this.value},b}(bc),bk=function(a){function b(a){var b,c,d,e;a==null&&(a=""),a==="none"&&(a="0 none #000"),b=(a=_(a)).match(/((?:[\d.]+)(?:[\w%]+)?)\s(\w+)\s(rgb(?:a)?\([\d,\s]+\)|hsl(?:a)?\([\d,\s]+\)|#[a-f0-9]+|\w+)/)||[],this.parsed=[new bg((c=b[1])!=null?c:""),new bj((d=b[2])!=null?d:""),new bh((e=b[3])!=null?e:"")]}return R(b,a),b}(bf),bl=function(a){function b(a){var b;a==null&&(a=""),a=ba(a.match(/rgb(a)?\([\d,\s]+\)|hsl(a)?\([\d,\s]+\)|#[a-f0-9]+|\w+/g)||[""]),this.parsed=function(){var c,d,e=[];for(c=0,d=a.length;c<d;c++)b=a[c],e.push(new bh(b));return e}()}return R(b,a),b}(bf),bm=function(a){function b(a){this.value=a==="auto"?a:Y(a)}return R(b,a),b}(bc),bn=function(a){function b(a){var b,c,d,e,f={translate:"0px,0px",rotate:"0deg",scale:"1,1",skew:"0deg,0deg"};if(a=_(a).match(/\w+\s?\([-,.\w\s]+\)/g)){c=function(a){var b,c,d,e,g,h,i,j,k,l,m;if(!(a=a.replace(/\s+/g,"").match(/^(translate|scale|rotate|skew)\((.*)\)$/)))return;b=a[1],c=a[2].split(",");switch(b){case"translate":if(c.length<2)return;k=[];for(d=0,h=c.length;d<h;d++)a=c[d],k.push(f[b]=Y(a)+"px");return k;case"rotate":return f[b]=Y(c[0])+"deg";case"scale":c.length===1&&(c=[c[0],c[0]]),l=[];for(e=0,i=c.length;e<i;e++)a=c[e],l.push(f[b]=Y(a));return l;case"skew":if(c.length===1)return;m=[];for(g=0,j=c.length;g<j;g++)a=c[g],m.push(f[b]=Y(a)+"deg");return m}};for(d=0,e=a.length;d<e;d++)b=a[d],c(b)}this.transforms=f}return R(b,a),b.prototype.toString=function(){var a;return function(){var b,c,d=["translate","rotate","scale","skew"],e=[];for(b=0,c=d.length;b<c;b++)a=d[b],e.push(""+a+"("+this.transforms[a]+")");return e}.call(this).join(" ")},b}(bc),bo={},bp={},bq={},br={},bs=document.documentElement,bt=function(a){return bp[a]||(bp[a]=function(){var b=bo[a]||bd;return function(){return(new b(bb(this)(a))).toString(!0,this)}}())},bu=function(a){return bq[a]||(bq[a]=function(){var b=bo[a]||bd;return function(c){return this.style[a]=(new b(c)).toString()}}())},bv=document.createElement("div"),bw="border:none;margin:none;padding:none;visibility:hidden;position:absolute;height:0;",bx=function(a,b){var c=a.parentNode,d=1;return c&&(bv.style.cssText=bw+("width:100"+b+";"),c.appendChild(bv),d=bv.offsetWidth/100,c.removeChild(bv)),d},by=["Top","Right","Bottom","Left"],bz=["TopLeft","TopRight","BottomRight","BottomLeft"];bo.color=bo.backgroundColor=bh,bo.width=bo.height=bo.fontSize=bo.backgroundSize=bg;for(x=0,B=by.length;x<B;x++){j=by[x],h="border"+j,L=["margin"+j,"padding"+j,h+"Width",j.toLowerCase()];for(y=0,C=L.length;y<C;y++)q=L[y],bo[q]=bg;bo[h+"Color"]=bh,bo[h+"Style"]=bj,bo[h]=bk,bp[h]=function(){return[bt(h+"Width").call(this),bt(h+"Style").call(this),bt(h+"Color").call(this)].join(" ")}}for(z=0,D=bz.length;z<D;z++)j=bz[z],bo["border"+j+"Radius"]=bg;bo.zIndex=bm,M=["margin","padding"],v=function(a){return bo[a]=bi,bp[a]=function(){var b;return function(){var c,d,e=[];for(d=0,c=by.length;d<c;d++)b=by[d],e.push(bt(a+b).call(this));return e}.call(this).join(" ")}};for(A=0,E=M.length;A<E;A++)q=M[A],v(q);bo.borderRadius=bi,bp.borderRadius=function(){var a;return function(){var b,c,d=[];for(c=0,b=by.length;c<b;c++)a=by[c],d.push(bt("border"+a+"Radius").call(this));return d}.call(this).join(" ")},bo.borderWidth=bi,bo.borderColor=bl,N=["Width","Style","Color"],w=function(a){return bp["border"+a]=function(){var b;return function(){var c,d,e=[];for(d=0,c=by.length;d<c;d++)b=by[d],e.push(bt("border"+b+a).call(this));return e}.call(this).join(" ")}};for(I=0,F=N.length;I<F;I++)r=N[I],w(r);bo.border=bk,bp.border=function(){var a,b,c,d,e;for(e=0,d=by.length;e<d;e++){a=by[e],c=bt(h="border"+a).call(this);if(b&&c!==b)return null;b=c}return c},l=bs.style.MsFilter!=null?"MsFilter":bs.style.filter!=null?"filter":null,bo.opacity=be,l&&bs.style.opacity==null&&(n=/alpha\(opacity=([\d.]+)\)/i,bq.opacity=function(a){var b;return a=(a=Y(a)===1)?"":"alpha(opacity="+a*100+")",b=bb(this)(l),this.style[l]=n.test(b)?b.replace(n,a):b+a},bp.opacity=function(){var a;return X((a=bb(this)(l).match(n))?a[1]/100:1)}),O=["MozTransform","WebkitTransform","OTransform","msTransform","transform"];for(J=0,G=O.length;J<G;J++){m=O[J];if(bs.style[m]==null)continue;s=m;break}bo.transform=bn,s?(br.transform=s,bq.transform=function(a){return this.style[s]=(new bn(a)).toString()},bp.transform=function(){return(new bn(this.style[s])).toString()}):(bq.transform=function(){},bp.transform=function(){return(new bn).toString()}),P=["WebkitTransition","MozTransition","transition"];for(K=0,H=P.length;K<H;K++){m=P[K];if(bs.style[m]==null)continue;u=m;break}t=u==="MozTransition"?"transitionend":"webkitTransitionEnd",k={"default":"cubic-bezier(0.25, 0.1, 0.25, 1.0)",linear:"cubic-bezier(0, 0, 1, 1)","ease-in":"cubic-bezier(0.42, 0, 1.0, 1.0)","ease-out":"cubic-bezier(0, 0, 0.58, 1.0)","ease-in-out":"cubic-bezier(0.42, 0, 0.58, 1.0)"},c=function(){function a(a,b){this.node=a,this.property=b,this.setter=bu(b),this.getter=bt(b)}return a.prototype.setOptions=function(a){var b;a==null&&(a={});if(!(this.duration=this.parseDuration((b=a.duration)!=null?b:"500ms")))throw new Error(""+a.duration+" is not a valid duration");if(!(this.equation=this.parseEquation(a.equation||"default")))throw new Error(""+a.equation+" is not a valid equation");return this.callback=a.callback||function(){},this},a.prototype.start=function(a,b){var c;return this.stop(),c=!0,a===b&&(c=!1),this.duration===0&&(this.setter.call(this.node,b),c=!1),c||W(this.callback),c},a.prototype.parseDuration=function(a){var b,c,d;if(!(b=X(a).match(/([\d.]+)(s|ms)/)))return null;c=Y(b[1]),d=b[2];if(d==="s")return c*1e3;if(d==="ms")return c},a.prototype.parseEquation=function(a){var b,c,d,e,f,g;a=k[a]||a,c=a.replace(/\s+/g,"").match(/^cubic-bezier\(([\d.]+),([\d.]+),([\d.]+),([\d.]+)\)$/);if(c){f=c.slice(1),g=[];for(e=0,d=f.length;e<d;e++)b=f[e],g.push(Y(b));return g}return null},a}(),i={},f=function(a){function b(a,c){var d=this;b.__super__.constructor.call(this,a,c),this.bstep=function(a){return d.step(a)}}return R(b,a),b.prototype.start=function(a,c){if(b.__super__.start.call(this,a,c)){this.time=0,a=this.numbers(a),c=this.numbers(c);if(a[0].length!==c[0].length)throw new Error("property length mismatch");this.from=a[0],this.to=c[0],this.template=c[1],W(this.bstep)}return this},b.prototype.stop=function(){return V(this.bstep),this},b.prototype.step=function(a){var b,c,d,e,f,g,h;this.time||(this.time=a),d=(a-this.time)/this.duration,d>1&&(d=1),b=this.equation(d),f=this.template,h=this.from;for(e=0,g=h.length;e<g;e++)c=h[e],r=this.to[e],f=f.replace("@",r!==c?this.compute(c,r,b):r);return this.setter.call(this.node,f),d!==1?W(this.bstep):this.callback(r),this},b.prototype.parseEquation=function(a){var c,d;return a=b.__super__.parseEquation.call(this,a),d=a.toString(),c=""+d+":"+this.duration+"ms",d===[0,0,1,1].toString()?function(a){return a}:i[c]||(i[c]=U(a[0],a[1],a[2],a[3],this.duration*2,1e3/60/this.duration/4))},b.prototype.compute=function(a,b,c){return(b-a)*c+a},b.prototype.numbers=function(a){var b=[],c=a.replace(/[-\d.]+/g,function(a){return b.push(Y(a)),"@"});return[b,c]},b}(c),e=function(a){function b(a,c){var d=this;b.__super__.constructor.call(this,a,c),this.hproperty=$(br[this.property]||this.property),this.bdefer=function(a){return d.defer(a)},this.bcomplete=function(a){return d.complete(a)}}return R(b,a),b.prototype.start=function(a,c){return b.__super__.start.call(this,a,c)&&(this.to=c,W(this.bdefer)),this},b.prototype.stop=function(a){return this.running?(this.running=!1,a&&this.setter.call(this.node,this.getter.call(this.node)),this.clean()):V(this.bdefer),this},b.prototype.defer=function(){return this.running=!0,this.modCSS(!0),this.node.addEventListener(t,this.bcomplete,!1),this.setter.call(this.node,this.to),null},b.prototype.clean=function(){return this.modCSS(),this.node.removeEventListener(t,this.bcomplete),null},b.prototype.complete=function(a){return a&&a.propertyName===this.hproperty&&(this.running=!1,this.clean(),this.callback()),null},b.prototype.removeProp=function(a,b,c,d){var e,f,g,h;for(e=0,h=b.length;e<h;e++){g=b[e];if(g!==a)continue;f=e;break}return f!=null&&(b.splice(f,1),c.splice(f,1),d.splice(f,1)),null},b.prototype.modCSS=function(a){var b,c=bb(this.node),d=c(u+"Property").replace(/\s+/g,"").split(",");return j=c(u+"Duration").replace(/\s+/g,"").split(","),b=c(u+"TimingFunction").replace(/\s+/g,"").match(/cubic-bezier\(([\d.,]+)\)/g),this.removeProp("all",d,j,b),this.removeProp(this.hproperty,d,j,b),a&&(d.push(this.hproperty),j.push(this.duration),b.push(this.equation)),this.node.style[u+"Property"]=d,this.node.style[u+"Duration"]=j,this.node.style[u+"TimingFunction"]=b,null},b.prototype.parseDuration=function(a){return""+b.__super__.parseDuration.call(this,a)+"ms"},b.prototype.parseEquation=function(a){return"cubic-bezier("+b.__super__.parseEquation.call(this,a)+")"},b}(c),d=function(){function a(){this.uid=0,this.animations={}}return a.prototype.retrieve=function(a,b){var c,d,g=(d=a["µid"])!=null?d:a["µid"]=(this.uid++).toString(36),h=(c=this.animations)[g]||(c[g]={});return h[b]||(h[b]=u?new e(a,b):new f(a,b))},a.prototype.starts=function(a,b,c){var d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A;c==null&&(c={}),w=typeof c,c=w==="function"?{callback:c}:w==="string"?{duration:c}:c,d=c.callback||function(){},e=0,m=0,c.callback=function(){if(++e===m)return d()};for(r in b){x=b[r],r=Z(r),q=bo[r];if(!q)throw new Error("no parser for "+r);s=bu(r),j=bt(r);for(A=0,y=a.length;A<y;A++){n=a[A],m++,l=this.retrieve(n,r),o=new q(j.call(n)),p=new q(x),h=o.extract(),t=p.extract();for(k=0,z=h.length;k<z;k++){g=h[k],u=t[k];if("auto"===u.value||"auto"===g.value)throw new Error("cannot animate "+r+" from or to `auto`");u.unit&&g.unit&&(f=!0,u.unit!=="px"&&(g.value=g.value/bx(n,u.unit),g.unit=u.unit))}i=o.toString(!0),v=p.toString(!0),f&&s.call(n,i),l.setOptions(c).start(i,v)}}return this},a.prototype.start=function(a,b,c,d){var e={};return e[b]=c,this.starts(a,e,d)},a.prototype.sets=function(a,b){var c,d,e,f,g,h,i,j;for(d in b){f=b[d],e=bu(d=Z(d));for(h=0,g=a.length;h<g;h++)c=a[h],(i=this.animations[c["µid"]])!=null&&(j=i[d])!=null&&j.stop(!0),e.call(c,f)}return this},a.prototype.set=function(a,b,c){var d={};return d[b]=c,this.sets(a,d)},a}(),g=new d,p=function(a){return this.valueOf=function(){return a},this},o=function(a){return a?new p(a.length!=null?a:a.nodeType===1?[a]:[]):null},o.prototype=p.prototype,o.prototype.animate=function(a,b,c){return typeof a!="string"?g.starts(this.valueOf(),a,b):g.start(this.valueOf(),a,b,c),this},o.prototype.style=function(a,b){return typeof a!="string"?g.sets(this.valueOf(),a):g.set(this.valueOf(),a,b),this},o.prototype.compute=function(a){return bt(Z(a)).call(this.valueOf()[0])},o.parse=function(a,b,c,d){return bo[a=Z(a)]?(new bo[a](b)).toString(c,d):null},o.cancelFrame=V,o.requestFrame=W,o.color=S,a.exports=o},color:function(a){var b={maroon:"#800000",red:"#ff0000",orange:"#ffA500",yellow:"#ffff00",olive:"#808000",purple:"#800080",fuchsia:"#ff00ff",white:"#ffffff",lime:"#00ff00",green:"#008000",navy:"#000080",blue:"#0000ff",aqua:"#00ffff",teal:"#008080",black:"#000000",silver:"#c0c0c0",gray:"#808080"},c=function(a,b,c,d){return d==null&&(d=1),a=parseInt(a,10),b=parseInt(b,10),c=parseInt(c,10),d=parseFloat(d),a<=255&&a>=0&&b<=255&&b>=0&&c<=255&&c>=0&&d<=1&&d>=0?[Math.round(a),Math.round(b),Math.round(c),d]:null},d=function(a){var b,c,d,e,f,g,h;a.length===3&&(a+="f"),a.length===4&&(b=a.charAt(0),c=a.charAt(1),d=a.charAt(2),e=a.charAt(3),a=b+b+c+c+d+d+e+e),a.length===6&&(a+="ff"),h=[];for(f=0,g=a.length;f<=g;f+=2)h.push(parseInt(a.substr(f,2),16)/(f===6?255:1));return h},e=function(a,b,c){return c<0&&(c+=1),c>1&&(c-=1),c<1/6?a+(b-a)*6*c:c<.5?b:c<2/3?a+(b-a)*(2/3-c)*6:a},f=function(a,b,c,d){var f,g,h,i,j;return d==null&&(d=1),a/=360,b/=100,c/=100,d/=1,a>1||a<0||b>1||b<0||c>1||c<0||d>1||d<0?null:(b===0?j=f=g=c:(i=c<.5?c*(1+b):c+b-c*b,h=2*c-i,j=e(h,i,a+1/3),g=e(h,i,a),f=e(h,i,a-1/3)),[j*255,g*255,f*255,d])};a.exports=function(a,e){var g;if(typeof a!="string")return null;a=b[a=a.replace(/\s+/g,"")]||a;if(a.match(/^#[a-f0-9]{3,8}/))a=d(a.replace("#",""));else{if(!(g=a.match(/([\d.])+/g)))return null;if(a.match(/^rgb/))a=g;else{if(!a.match(/^hsl/))return null;a=f.apply(null,g)}}return!a||!(a=c.apply(null,a))?null:e?a:(a[3]===1&&a.splice(3,1),"rgb"+(a.length>3?"a":"")+"("+a+")")}},frame:function(a){var b,c=[],d=!1,e=function(a){var b;a==null&&(a=+(new Date)),d=!1,b=c.length;while(b)c.splice(--b,1)[0](a);return null};typeof window!="undefined"&&(b=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame),b||(b=function(a){return setTimeout(a,1e3/60)}),a.exports={request:function(a){return c.push(a),d||(d=!0,b(e)),this},cancel:function(a){var b,d,e;for(d=0,e=c.length;d<e;d++)b=c[d],b===a&&c.splice(d,1);return this}}},bezier:function(a){a.exports=function(a,b,c,d,e,f){var g,h,i,j,k,l,m=[0],n=[0],o=0,p=1;while(p<e-1)j=1/e*p,g=Math.pow(1-j,2)*3*j,h=Math.pow(j,2)*3*(1-j),i=Math.pow(j,3),k=a*g+c*h+i,l=b*g+d*h+i,k-o>f&&(o=k,m.push(k),n.push(l)),p++;return m.push(1),n.push(1),function(a){var b,c=0,d=m.length-1;while(c<=d){b=Math.floor((c+d)/2);if(m[b]===a)break;m[b]>a?d=b-1:c=b+1}return n[b]}}}}}})